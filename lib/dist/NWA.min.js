!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){a.exports=c(6)},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={HEARTBEAT:"HEARTBEAT_EVENT",PAGE_VIEW:"PAGE_VIEW_EVENT",CC_IMPRESSION:"CC_IMPRESSION_EVENT",FORM_INPUT_CHANGED:"FORM_INPUT_CHANGED_EVENT",IMPRESSION:"IMPRESSION_EVENT",EXPERIMENT_EXPOSURE:"EXPERIMENT_EXPOSURE_EVENT"};b["default"]=c},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(k===setTimeout)return setTimeout(a,0);if((k===c||!k)&&setTimeout)return k=setTimeout,setTimeout(a,0);try{return k(a,0)}catch(b){try{return k.call(null,a,0)}catch(b){return k.call(this,a,0)}}}function f(a){if(l===clearTimeout)return clearTimeout(a);if((l===d||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{return l(a)}catch(b){try{return l.call(null,a)}catch(b){return l.call(this,a)}}}function g(){p&&n&&(p=!1,n.length?o=n.concat(o):q=-1,o.length&&h())}function h(){if(!p){var a=e(g);p=!0;for(var b=o.length;b;){for(n=o,o=[];++q<b;)n&&n[q].run();q=-1,b=o.length}n=null,p=!1,f(a)}}function i(a,b){this.fun=a,this.array=b}function j(){}var k,l,m=a.exports={};!function(){try{k="function"==typeof setTimeout?setTimeout:c}catch(a){k=c}try{l="function"==typeof clearTimeout?clearTimeout:d}catch(a){l=d}}();var n,o=[],p=!1,q=-1;m.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new i(a,b)),1!==o.length||p||e(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=j,m.addListener=j,m.once=j,m.off=j,m.removeListener=j,m.removeAllListeners=j,m.emit=j,m.binding=function(a){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(a){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(a,b,c){(function(a){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}Object.defineProperty(b,"__esModule",{value:!0}),b.constructHeader=b.ACTIVITY_LOG_URL=b.PAGE_VIEW_LOG_URL=b.init=void 0;var f,g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},i=c(1),j=d(i),k="/lib/opt.php",l="/api/v1/activity/",m=(f={},e(f,j["default"].HEARTBEAT,"heartbeat"),e(f,j["default"].CC_IMPRESSION,"ccimpression"),e(f,j["default"].FORM_INPUT_CHANGED,"form_input_changed"),e(f,j["default"].IMPRESSION,"event"),e(f,j["default"].EXPERIMENT_EXPOSURE,"event"),f),n=function(a,b,c){var d=b.url,e=b.referrer,f=b.pageViewId,g=c.browserSessionId,h=c.cookieId;return{url:d,referrer:e,cookieId:h,browserSessionId:g,pageviewId:f}},o=function(a,b,c,d,e,f){var i=d.bccId,j=d.wpPageID,l=d.wpPageType,m=d.variantIds,o=d.taxonomyPageType,p=d.taxonomyVertical,q=d.taxonomyTopic,r=d.canonicalURL,s=void 0,t=void 0;if(void 0!==("undefined"==typeof window?"undefined":h(window))){if(!r){var u=document.querySelector('link[rel="canonical"]');u&&(r=u.href)}var v=document.querySelector("meta[name=brainSuccess]");v&&(s=v.content);var w=document.querySelector("meta[name=brainOfferId]");w&&(t=w.content)}var x=JSON.stringify(g({bccId:i,brainSuccess:s,brainOfferId:t,wpPageID:j,wpPageType:l,variantIds:m,canonicalURL:r,taxonomyTopic:q,taxonomyVertical:p,taxonomyPageType:o},c,{header:g({eventName:b},n(c,d,e))}));x=encodeURIComponent(x),a.request({url:k,body:"tracking_method=pipeline&logger="+x,withCredentials:!0,method:"POST",retry:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}},f)},p=function(b,c){var d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],e=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],f=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],h=arguments.length<=5||void 0===arguments[5]?function(){}:arguments[5];if(c===j["default"].PAGE_VIEW)return o(b,c,d,e,f,h);var i=void 0;if(d.endpoint?(i=d.endpoint,delete d.endpoint):i=m[c],null==i)return a.nextTick(h);if(c===j["default"].IMPRESSION&&d.impressionHeader){var k=d.impressionHeader.vertical;delete d.impressionHeader.vertical,d.impressionHeader.category=k+" Offers",c=k.toUpperCase().replace(/ /g,"_")+"_IMPRESSION_EVENT"}var p=g({},d,{header:g({eventName:c},n(d,e,f))});return b.request({url:"//logger."+e.baseDomain+l+i,body:JSON.stringify(p),withCredentials:!0,method:"POST",headers:{"Content-Type":"application/json"}},h)},q=function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{track:p.bind(null,a)}};b.init=q,b.PAGE_VIEW_LOG_URL=k,b.ACTIVITY_LOG_URL=l,b.constructHeader=n}).call(b,c(2))},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=function(){if("undefined"==typeof window)return null;var a="optimizely"in window&&void 0!==window.optimizely.data&&void 0!==window.optimizely.data.state&&void 0!==window.optimizely.data.experiments,b={e:[]};if(a){window.optimizely.push&&window.optimizely.push(["activate"]);for(var c=window.optimizely.data,d=0;d<c.state.activeExperiments.length;d++){var e=c.state.activeExperiments[d];b.e[d]={exp:c.experiments[e].name,expId:e,"var":c.state.variationNamesMap[e],varId:c.state.variationIdsMap[e][0]}}b.oe=c.state.variationMap}else b.opt_found=!1;return b};b.loadOptimizelyData=c},function(a,b){function c(a){return null!==a&&"object"==typeof a}a.exports=c},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0}),b.Events=b.BrowserNWA=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function p(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:p(e,b,c)}if("value"in d)return d.value;var f=d.get;return void 0!==f?f.call(c):void 0},k=c(12),l=k.NWA.Events,m=1e3,n=60*m,o=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(d(this,b),void 0===("undefined"==typeof window?"undefined":h(window)))throw new Error("BrowserNWA can only be run in a browser environment");var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.heartbeatInterval=a.heartbeatInterval||5*m,c.heartbeat=c.heartbeat.bind(c),c}return f(b,a),i(b,[{key:"constructHeader",value:function(){var a="nerdwallet.com",c=document.domain;-1!==c.indexOf("localnerd.nerdwallet.com")?a="localnerd.nerdwallet.com":-1!==c.indexOf("nerdwallet.biz")&&(a="nerdwallet.biz");var d=g({},j(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"constructHeader",this).call(this),{url:this.getURL(),referrer:""+document.referrer,baseDomain:a});return d}},{key:"getURL",value:function(){return window.location.href.toString()}},{key:"heartbeat",value:function(){null==this.heartbeatStartedAt&&(this.heartbeatStartedAt=Date.now());var a=Date.now()-this.heartbeatStartedAt;this.track(l.HEARTBEAT,{timeElapsed:a,windowFocus:void 0!==("undefined"==typeof document?"undefined":h(document))&&document.hasFocus()}),a>n&&(window.clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=window.setInterval(this.heartbeat,n)),a>10*n&&this.stopHeartbeats()}},{key:"isHeartBeating",value:function(){return null!=this.heartbeatStartedAt}},{key:"startHeartbeats",value:function(){this.heartbeatIntervalId&&window.clearInterval(this.heartbeatIntervalId),this.heartbeatStartedAt=Date.now(),this.heartbeatIntervalId=window.setInterval(this.heartbeat,this.heartbeatInterval)}},{key:"stopHeartbeats",value:function(){window.clearInterval(this.heartbeatIntervalId),this.heartbeatStartedAt=null}},{key:"track",value:function(a,c,d){a===l.PAGE_VIEW?(this.setGlobalProp("url",this.getURL()),this.setGlobalProp("pageViewId",this.generatePageViewId()),j(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"track",this).call(this,l.PAGE_VIEW,c,d),this.isHeartBeating()&&(this.stopHeartbeats(),this.startHeartbeats())):j(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"track",this).call(this,a,c,d)}}]),b}(k.NWA);"undefined"!=typeof window&&(window.NWA2=o,window.NWA2.Events=l),b.BrowserNWA=o,b.Events=l},function(a,b,c){(function(a){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.init=void 0;var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=c(1),g=d(f),h=c(4),i=function(a){if("undefined"==typeof amplitude||"undefined"==typeof window)return!1;var b=!amplitude.getInstance().options,c=b||amplitude.getInstance().options.apiKey!==a;return c&&amplitude.getInstance().init(a,null,{includeUtm:!0,includeReferrer:!0}),!0},j=function(a,b){if(null==b||0===b.length)return null;if(i(a.key)===!1)return null;var c={};return b.forEach(function(a){c["seen_ab_exp_variant_"+a]=a}),amplitude.getInstance().setUserProperties(c)},k=function(a,b){if(null==b||null==b.e)return null;if(i(a.key)===!1)return null;var c=[];if(b.e.forEach(function(a){c.push(a.varId)}),0===c.length)return null;var d={};return c.forEach(function(a){d["seen_optimizely_exp_variant_"+a]=a}),amplitude.getInstance().setUserProperties(d)},l=function(b,c){var d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],f=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],j=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],l=arguments.length<=5||void 0===arguments[5]?function(){}:arguments[5];if(c===g["default"].HEARTBEAT)return a.nextTick(l);if(i(b.key)===!1)return a.nextTick(l);if(j.cookieId&&amplitude.getInstance().setDeviceId(j.cookieId),c===g["default"].PAGE_VIEW){var m=h.loadOptimizelyData();m.opt_found!==!1&&k(b,m)}var n=e({},d,f,j);n.gaUserAuthenticationState&&(n.loggedInStatus=n.gaUserAuthenticationState,delete n.gaUserAuthenticationState),n.url&&(n.query=n.url.replace(/.*[?#]/,""),n.url=n.url.replace(/[?#].*/,""),n.query===n.url&&delete n.query);var o=function(a,b){l(200===a||0===a?null:[a,b])};return amplitude.getInstance().logEvent(c,n,o)},m=function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{track:l.bind(null,a),setSeenExperimentIds:j.bind(null,a),setSeenOptimizelyIds:k.bind(null,a)}};b.init=m}).call(b,c(2))},function(a,b,c){(function(a){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.init=void 0;var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=c(1),g=d(f),h=c(4),i=c(3),j=function(b,c){var d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],f=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],j=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],k=arguments.length<=5||void 0===arguments[5]?function(){}:arguments[5];if("undefined"==typeof window)return a.nextTick(k);if(c!==g["default"].PAGE_VIEW)return a.nextTick(k);var l=e({},i.constructHeader(d,f,j)),m=encodeURIComponent(JSON.stringify({header:l})),n=JSON.stringify(e({},h.loadOptimizelyData(),{p:window.location.pathname+encodeURIComponent(window.location.search),r:encodeURIComponent(f.referrer)}));return b.request({url:i.PAGE_VIEW_LOG_URL,body:"tracking_method=counter&logger="+m+"&data="+n,withCredentials:!0,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}},k)},k=function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{track:j.bind(null,a)}};b.init=k}).call(b,c(2))},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=function(a){return{track:function(){for(var b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];var e=document.getElementById(a.id);e&&(e.innerHTML=e.innerHTML+"<p>"+JSON.stringify(c)+"</p>")}}};b.init=c},function(a,b,c){(function(a){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.init=void 0;var e=c(1),f=d(e),g=function(b,c){var d=(arguments.length<=2||void 0===arguments[2]?{}:arguments[2],arguments.length<=3||void 0===arguments[3]?{}:arguments[3]),e=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],g=arguments.length<=5||void 0===arguments[5]?function(){}:arguments[5];if("undefined"==typeof ga||"undefined"==typeof window)return a.nextTick(g);if(c!==f["default"].PAGE_VIEW)return a.nextTick(g);ga(function(a){var c=a.get("clientId"),d=JSON.stringify({gaClientId:c});b.request({url:"/lib/ga_identify.php",method:"POST",body:{data:d},retry:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}},g)});var h=e.gaUserAuthenticationState;return ga("set","location",d.url),ga("set","dimension1",e.cookieId),ga("set","dimension3",h),ga("send","pageview"),!0},h=function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{track:g.bind(null,a)}};b.init=h}).call(b,c(2))},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.instantiateLogger=void 0;var d=c(3),e=c(8),f=c(9),g=c(10),h=c(7),i={dwh:d.init,counter:e.init,dom:f.init,ga:g.init,amplitude:h.init},j=function(a,b){var c=i[a];return c?new c(b):null};b.instantiateLogger=j},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0}),b.NWA=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(1),j=d(i),k=c(13),l=d(k),m=c(14),n=d(m),o=c(11),p=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=this,d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];f(this,a);var i=[],j=g({},h),k=g({},this.constructHeader(),d);this.toString=function(){return JSON.stringify(g({},j,k))};var m=[];b.loggers&&(m=m.concat(b.loggers)),this.request=l["default"],b.request&&(this.request=b.request),this.enableLogger=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],d=o.instantiateLogger(a,g({request:c.request},b));d?m.push(d):console.error("Unable to use logger "+a+" in this environment")},this.getLoggers=function(){return m},this.getGlobalProp=function(a){return k[a]},this.setGlobalProp=function(a,b){return k[a]=b},this.getGlobalProps=function(){return g({},k)},this.getUserProp=function(a){return j[a]},this.setUserProp=function(a,b){return j[a]=b},this.getUserProps=function(){return g({},j)},this.enqueue=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return i.push(b)},this.processQueue=function(){var a=0;i.forEach(function(b){c.track.apply(c,e(b)),a++}),i.splice(0,a)},this.canTrack()||this.getSession()}return h(a,[{key:"canTrack",value:function(){return null!=this.getUserProp("cookieId")}},{key:"constructHeader",value:function(){var a={pageViewId:this.generatePageViewId()};return a}},{key:"generatePageViewId",value:function(){return n["default"]()}},{key:"getSession",value:function(){var a=this;this.request({retry:!0,url:"/lib/opt.gif?identify=true"},function(b,c,d){if(b)return void console.error(b);var e=d;"string"==typeof d&&(e=JSON.parse(d)),a.setUserProp("browserSessionId",e.browserSessionId),a.setUserProp("cookieId",e.cookieId),a.processQueue()})}},{key:"track",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?function(){}:arguments[2];if(!this.canTrack())return void this.enqueue(a,b,c);for(var d=this.getLoggers(),e={},f=[],h=function(a,b){b&&f.push(b),e[a]=!0;var d=!0;Object.keys(e).forEach(function(a){d=d&&e[a]===!0}),d&&c(0===f.length?null:f)},i=0,j=d.length;j>i;i++){var k=d[i];"function"==typeof k.track&&(e[i]=!1,k.track(a,b,g({},this.constructHeader(),this.getGlobalProps()),this.getUserProps(),h.bind(this,i)))}}},{key:"setSeenExperimentIds",value:function(a){for(var b=this.getLoggers(),c=0,d=b.length;d>c;c++){var e=b[c];"function"==typeof e.setSeenExperimentIds&&e.setSeenExperimentIds(a)}}}]),a}();p.Events=j["default"],b.NWA=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(18),f=d(e),g=c(16),h=d(g);h["default"](f["default"]),b["default"]=function(a){var b=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1],c=a.method?f["default"][a.method.toLowerCase()]:f["default"].get;if(c=c(a.url),a.headers){var d=Object.keys(a.headers);d.forEach(function(b){c=c.set(b,a.headers[b])})}a.body&&(c=c.send(a.body)),a.retry&&(c=c.retry(3)),a.withCredentials&&(c=c.withCredentials()),c.end(function(a,c){a?b(a,c,null):b(null,c,c.body)})}},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:3&c|8).toString(16)})}},function(a,b,c){function d(a){return a?e(a):void 0}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}a.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},function(a,b,c){function d(a){var b=this,c=this.end;return a=a||1,this.end=function(d){function g(){return c.call(b,function(c,i){return a&&f(c,i)?(e(b,h),a--,g()):d&&d(c,i)})}var h=this._timeout;return g()},this}function e(a,b){var c=a.req._headers,d=a.req.path;a.req.abort(),a.called=!1,a.timeout(b),delete a.req,delete a._timer;for(var e in c)a.set(e,c[e]);a.qs||(a.req.path=d)}function f(a,b){return g.some(function(c){return c(a,b)})}var g=c(17);a.exports=function(a){var b=a.Request;return b.prototype.retry=d,a},a.exports.retries=g},function(a,b){function c(a,b){return a&&"ECONNRESET"===a.code}function d(a,b){return a&&"ETIMEDOUT"===a.code}function e(a,b){return a&&"EADDRINFO"===a.code}function f(a,b){return a&&"ESOCKETTIMEDOUT"===a.code}function g(a,b){return b&&500===b.status}function h(a,b){return b&&-1!==[502,503,504].indexOf(b.status)}function i(a,b){return a&&/^timeout of \d+ms exceeded$/.test(a.message)}a.exports=[c,d,e,f,h,i,g]},function(a,b,c){function d(){}function e(a){if(!r(a))return a;var b=[];for(var c in a)f(b,c,a[c]);return b.join("&")}function f(a,b,c){if(null!=c)if(Array.isArray(c))c.forEach(function(c){f(a,b,c)});else if(r(c))for(var d in c)f(a,b+"["+d+"]",c[d]);else a.push(encodeURIComponent(b)+"="+encodeURIComponent(c));else null===c&&a.push(encodeURIComponent(b))}function g(a){for(var b,c,d={},e=a.split("&"),f=0,g=e.length;g>f;++f)b=e[f],c=b.indexOf("="),-1==c?d[decodeURIComponent(b)]="":d[decodeURIComponent(b.slice(0,c))]=decodeURIComponent(b.slice(c+1));return d}function h(a){var b,c,d,e,f=a.split(/\r?\n/),g={};f.pop();for(var h=0,i=f.length;i>h;++h)c=f[h],b=c.indexOf(":"),d=c.slice(0,b).toLowerCase(),e=t(c.slice(b+1)),g[d]=e;return g}function i(a){return/[\/+]json\b/.test(a)}function j(a){return a.split(/ *; */).shift()}function k(a){return a.split(/ *; */).reduce(function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})}function l(a,b){b=b||{},this.req=a,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this._setStatusProperties(this.xhr.status),this.header=this.headers=h(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function m(a,b){var c=this;this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on("end",function(){var a=null,b=null;try{b=new l(c)}catch(d){return a=new Error("Parser is unable to parse the response"),a.parse=!0,a.original=d,a.rawResponse=c.xhr&&c.xhr.responseText?c.xhr.responseText:null,a.statusCode=c.xhr&&c.xhr.status?c.xhr.status:null,c.callback(a)}c.emit("response",b);var e;try{(b.status<200||b.status>=300)&&(e=new Error(b.statusText||"Unsuccessful HTTP response"),e.original=a,e.response=b,e.status=b.status)}catch(d){e=d}e?c.callback(e,b):c.callback(null,b)})}function n(a,b){var c=s("DELETE",a);return b&&c.end(b),c}var o;"undefined"!=typeof window?o=window:"undefined"!=typeof self?o=self:(console.warn("Using browser-only version of superagent in non-browser environment"),o=this);var p=c(15),q=c(19),r=c(5),s=a.exports=c(20).bind(null,m);s.getXHR=function(){if(!(!o.XMLHttpRequest||o.location&&"file:"==o.location.protocol&&o.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}throw Error("Browser-only verison of superagent could not find XHR")};var t="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};s.serializeObject=e,s.parseString=g,s.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},s.serialize={"application/x-www-form-urlencoded":e,"application/json":JSON.stringify},s.parse={"application/x-www-form-urlencoded":g,"application/json":JSON.parse},l.prototype.get=function(a){return this.header[a.toLowerCase()]},l.prototype._setHeaderProperties=function(a){var b=this.header["content-type"]||"";this.type=j(b);var c=k(b);for(var d in c)this[d]=c[d]},l.prototype._parseBody=function(a){var b=s.parse[this.type];return!b&&i(this.type)&&(b=s.parse["application/json"]),b&&a&&(a.length||a instanceof Object)?b(a):null},l.prototype._setStatusProperties=function(a){1223===a&&(a=204);var b=a/100|0;this.status=this.statusCode=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.clientError=4==b,this.serverError=5==b,this.error=(4==b||5==b)&&this.toError(),this.accepted=202==a,this.noContent=204==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.notFound=404==a,this.forbidden=403==a},l.prototype.toError=function(){var a=this.req,b=a.method,c=a.url,d="cannot "+b+" "+c+" ("+this.status+")",e=new Error(d);return e.status=this.status,e.method=b,e.url=c,e},s.Response=l,p(m.prototype);for(var u in q)m.prototype[u]=q[u];m.prototype.type=function(a){return this.set("Content-Type",s.types[a]||a),this},m.prototype.responseType=function(a){return this._responseType=a,this},m.prototype.accept=function(a){return this.set("Accept",s.types[a]||a),this},m.prototype.auth=function(a,b,c){switch(c||(c={type:"basic"}),c.type){case"basic":var d=btoa(a+":"+b);this.set("Authorization","Basic "+d);break;case"auto":this.username=a,this.password=b}return this},m.prototype.query=function(a){return"string"!=typeof a&&(a=e(a)),a&&this._query.push(a),this},m.prototype.attach=function(a,b,c){return this._getFormData().append(a,b,c||b.name),this},m.prototype._getFormData=function(){return this._formData||(this._formData=new o.FormData),this._formData},m.prototype.callback=function(a,b){var c=this._callback;this.clearTimeout(),c(a,b)},m.prototype.crossDomainError=function(){var a=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");a.crossDomain=!0,a.status=this.status,a.method=this.method,a.url=this.url,this.callback(a)},m.prototype._timeoutError=function(){var a=this._timeout,b=new Error("timeout of "+a+"ms exceeded");b.timeout=a,this.callback(b)},m.prototype._appendQueryString=function(){var a=this._query.join("&");a&&(this.url+=~this.url.indexOf("?")?"&"+a:"?"+a)},m.prototype.end=function(a){var b=this,c=this.xhr=s.getXHR(),e=this._timeout,f=this._formData||this._data;this._callback=a||d,c.onreadystatechange=function(){if(4==c.readyState){var a;try{a=c.status}catch(d){a=0}if(0==a){if(b.timedout)return b._timeoutError();if(b._aborted)return;return b.crossDomainError()}b.emit("end")}};var g=function(a,c){c.total>0&&(c.percent=c.loaded/c.total*100),c.direction=a,b.emit("progress",c)};if(this.hasListeners("progress"))try{c.onprogress=g.bind(null,"download"),c.upload&&(c.upload.onprogress=g.bind(null,"upload"))}catch(h){}if(e&&!this._timer&&(this._timer=setTimeout(function(){b.timedout=!0,b.abort()},e)),this._appendQueryString(),this.username&&this.password?c.open(this.method,this.url,!0,this.username,this.password):c.open(this.method,this.url,!0),this._withCredentials&&(c.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof f&&!this._isHost(f)){var j=this._header["content-type"],k=this._serializer||s.serialize[j?j.split(";")[0]:""];!k&&i(j)&&(k=s.serialize["application/json"]),k&&(f=k(f))}for(var l in this.header)null!=this.header[l]&&c.setRequestHeader(l,this.header[l]);return this._responseType&&(c.responseType=this._responseType),this.emit("request",this),c.send("undefined"!=typeof f?f:null),this},s.Request=m,s.get=function(a,b,c){var d=s("GET",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},s.head=function(a,b,c){var d=s("HEAD",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.options=function(a,b,c){var d=s("OPTIONS",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.del=n,s["delete"]=n,s.patch=function(a,b,c){var d=s("PATCH",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.post=function(a,b,c){var d=s("POST",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.put=function(a,b,c){var d=s("PUT",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d}},function(a,b,c){var d=c(5);b.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},b.parse=function(a){return this._parser=a,this},b.serialize=function(a){return this._serializer=a,this},b.timeout=function(a){return this._timeout=a,this},b.then=function(a,b){if(!this._fullfilledPromise){var c=this;this._fullfilledPromise=new Promise(function(a,b){c.end(function(c,d){c?b(c):a(d)})})}return this._fullfilledPromise.then(a,b)},b["catch"]=function(a){return this.then(void 0,a)},b.use=function(a){return a(this),this},b.get=function(a){return this._header[a.toLowerCase()]},b.getHeader=b.get,b.set=function(a,b){if(d(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},b.unset=function(a){return delete this._header[a.toLowerCase()],delete this.header[a],this},b.field=function(a,b){if(null===a||void 0===a)throw new Error(".field(name, val) name can not be empty");if(d(a)){for(var c in a)this.field(c,a[c]);return this}if(null===b||void 0===b)throw new Error(".field(name, val) val can not be empty");return this._getFormData().append(a,b),this},b.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},b.withCredentials=function(){return this._withCredentials=!0,this},b.redirects=function(a){return this._maxRedirects=a,this},b.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},b._isHost=function(a){var b={}.toString.call(a);switch(b){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}},b.send=function(a){var b=d(a),c=this._header["content-type"];if(b&&d(this._data))for(var e in a)this._data[e]=a[e];else"string"==typeof a?(c||this.type("form"),c=this._header["content-type"],"application/x-www-form-urlencoded"==c?this._data=this._data?this._data+"&"+a:a:this._data=(this._data||"")+a):this._data=a;return!b||this._isHost(a)?this:(c||this.type("json"),this)}},function(a,b){function c(a,b,c){return"function"==typeof c?new a("GET",b).end(c):2==arguments.length?new a("GET",b):new a(b,c)}a.exports=c}]),function(a){window.NWA={},window.NWA.debug=a(this,window.NWA,window.$)}(function(a,b,c){var d=function(a){var b=document.domain;(-1!==b.indexOf("nerdwallet.biz")||-1!==b.indexOf("localnerd"))&&"object"==typeof console&&console.log(a)};return d}),function(a){window.NWA.polyfills=a(this,window.NWA)}(function(a,b){var c=function(){},d=Function.prototype.bind,e=Object.create,f=Array.prototype.slice,g=function(a){return"function"==typeof a||!1},h=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},i=function(a){if(!h(a))return{};if(e)return e(a);c.prototype=a;var b=new c;return c.prototype=null,b},j=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=i(a.prototype),g=a.apply(f,e);return h(g)?g:f},k=function(a,b){if(d&&a.bind===d)return d.apply(a,f.call(arguments,1));if(!g(a))throw new TypeError("Bind must be called on a function");var c=f.call(arguments,2),e=function(){
return j(a,e,b,this,c.concat(f.call(arguments)))};return e};return{bind:k}}),function(a){window.NWA.utils=a(this,window.NWA,window.$)}(function(a,b,c){function d(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)});return b}function e(a){return b.metadata.get("baseProtocol").concat("://logger.").concat(b.metadata.get("baseDomain")).concat("string"===c.type(a)?a:"")}function f(a){var b=c("meta[name='"+a+"']");return b.length>0?b.attr("content"):null}function g(a){var b=a[0],d=b.getBoundingClientRect();return!(d.bottom<=0||d.right<=0||d.top>=c(window).height()||d.left>=c(window).width())}function h(a){var b=[];return c.each(a,function(a,c){c===!0&&b.push(a)}),b}return{generateUUID:d,getLoggerUrl:e,getMetaContentByName:f,isElementInViewport:g,keysWithTrueValues:h}}),function(a){window.NWA.eventCenter=a(this,window.NWA)}(function(a,b){function c(){}var d={formInputChanged:[],creditCardImpression:[],creditCardsState_set:[],offerClientImpression:[],offerClientState_set:[],experimentExposure:[],experimentState_set:[],gaUserAuthenticationState_set:[],variantIds_set:[],heartbeat:[],pageView:[],userId_set:[],customEvent:[],reportExperimentExposure:[],reportCCImpression:[]};return c.prototype.inspect=function(){return d},c.prototype.publish=function(a,c){return this.validateEvent(a)?void $.each(d[a],function(a,b){b(void 0!==c?c:{})}):void b.debug("Invalid event: "+a)},c.prototype.subscribe=function(a,c){if(!this.validateEvent(a))return void b.debug("Invalid event: "+a);var e=d[a].push(c)-1;return{remove:function(){delete d[a][e]}}},c.prototype.validateEvent=function(a){return d.hasOwnProperty(a)?!0:!1},new c}),function(a){window.NWA.metadata=a(this,window.NWA,window.$)}(function(a,b,c){function d(){this.set("initialPageViewSent",!1)}var e={LOGGED_IN:"logged_in",LOGGED_OUT:"logged_out"},f={},g=["creditCardsState","offerClientState","userId","gaUserAuthenticationState","variantIds"];return d.prototype.all=function(){return f},d.prototype.collectInitial=function(){this._setBaseDomain(),this._setBCCId(),this._setInitialGAUserAuthenticationState(),this._setURLBasedImpressionPaths(),this.set("url",window.location.href),this.set("referrer",document.referrer),this.set("max_retries",3),this.set("retry_delay",1e3),this.generatePageViewId()},d.prototype.generatePageViewId=function(){this.set("pageViewId",b.utils.generateUUID())},d.prototype.get=function(a){return f[a]},d.prototype.dump=function(){return f},d.prototype.getAnalyticsHeader=function(a){var b={pageviewId:this.get("pageViewId"),referrer:this.get("referrer"),url:this.get("url")};return this.get("userId")&&(b.cookieId=this.get("userId")),this.get("browserSessionId")&&(b.browserSessionId=this.get("browserSessionId")),c.extend(b,void 0!==a?a:{})},d.prototype.onPageView=function(a){this._setTaxonomyInfo(),this._setVariantIds(),this.get("initialPageViewSent")&&(this.set("referrer",this.get("url")),this.set("url",window.location.href),this.generatePageViewId())},d.prototype.set=function(a,c){return f[a]=c,-1!==g.indexOf(a)&&b.eventCenter.publish(a.concat("_set"),c),this},d.prototype.subscribe=function(){},d.prototype._setBaseDomain=function(){var a="https",b="nerdwallet.com",c=document.domain;-1!==c.indexOf("localnerd.nerdwallet.com")?(b="localnerd.nerdwallet.com",a="https"):-1!==c.indexOf("nerdwallet.biz")&&(b="nerdwallet.biz"),this.set("baseProtocol",a),this.set("baseDomain",b)},d.prototype._setURLBasedImpressionPaths=function(){var a=[["com/redirect.php","c=taxes"],["com/redirect.php","c=credit_scores"],["com/redirect.php","c=prepaid_cards"],["investing","lookup"],"rates/redirect_new","rates/redirect.php","insurance/products","insurance/providers","investing/network-links/"],b=a.map(function(a){var b=a;Array.isArray(a)||(b=[a]);var c=b.map(function(a){return'[href*="'+a+'"]'});return"a"+c.join("")}).join();this.set("genericURLSelector",b)},d.prototype._setTaxonomyInfo=function(){"undefined"!=typeof nwPageTaxonomy&&(this.set("taxonomyVertical",nwPageTaxonomy.vertical),this.set("taxonomyTopic",nwPageTaxonomy.topic),this.set("taxonomyPageType",nwPageTaxonomy.pageType))},d.prototype.loadOptimizelyData=function(){var a={e:[]};if("optimizely"in window&&void 0!==window.optimizely.data&&void 0!==window.optimizely.data.state&&void 0!==window.optimizely.data.experiments){window.optimizely.push&&window.optimizely.push(["activate"]);var b=window.optimizely.data;for(i=0;i<b.state.activeExperiments.length;i++){var c=b.state.activeExperiments[i];a.e[i]={exp:b.experiments[c].name,expId:c,"var":b.state.variationNamesMap[c],varId:b.state.variationIdsMap[c][0]}}a.oe=b.state.variationMap}else a.opt_found=!1;return this.set("optimizelyData",a),this.get("optimizelyData")},d.prototype._setVariantIds=function(){"undefined"!=typeof nwVariantIds&&this.set("variantIds",nwVariantIds)},d.prototype._setBCCId=function(){var a=b.utils.getMetaContentByName("bcc-id");this.set("bccId",a)},d.prototype.GA_USER_AUTHENTICATION_STATE=e,d.prototype._setInitialGAUserAuthenticationState=function(){this.set("gaUserAuthenticationState",b.utils.getMetaContentByName("ga-user-authentication-state"))},new d}),function(a){window.NWA.BaseClickReporter=a(this,window.NWA,window.$)}(function(a,b,c){function d(a,b,c){this.selector=b,this.vertical=a,this.impressionReporter=c}return d.prototype.flattenEventDict=function(a,b){var c="";for(var d in b){var e=b[d];"string"==typeof e||"number"==typeof e?c+="&"+encodeURIComponent(a+d)+"="+encodeURIComponent(e):"object"==typeof e&&(c+=this.flattenEventDict(a+d+"_",e))}return c},d.prototype.augmentLink=function(a,d,e){if(!(a.attr("href").indexOf("header_pageViewId")>-1)){var f,g=b.BaseImpressionReporter.prototype.generateKey.call(this,a,this.vertical),h=b.metadata.get("impressionsFired")[e][g];"undefined"==typeof h&&(h=this.impressionReporter.constructImpression(a)),h=c.extend(!0,{},h),h.clickHeader=h.impressionHeader,delete h.impressionHeader,h.header_pageViewId=b.metadata.get("pageViewId"),-1==a.attr("href").indexOf("pos=")&&(h.pos=h.clickHeader.productPosition);var i=this.flattenEventDict("",h);-1===d.indexOf("?")&&(i=i.replace("&","?")),f=d.indexOf("localnerd")>-1?d+i:d.replace("http:","https:")+i,a.attr("href",f)}},d.prototype.listen=function(){var a=this,b="mousedown contextmenu click focus";"ontouchstart"in window&&(b="touchstart contextmenu click focus"),c("body").on(b,a.selector,function(b){var d=c(this);a.augmentLink(d,this.href,a.vertical),"click"==b.type&&(b.ctrlKey||b.metaKey||"_blank"===d.attr("target")?window.open(d.attr("href")):window.location=d.attr("href"),b.preventDefault())})},d}),function(a){window.NWA.BaseImpressionReporter=a(this,window.NWA,window.$)}(function(a,b,c){function d(a,c){this.firedImpressions=[],this.vertical=a,this.selector=c,this.paths=[],"impressionsFired"in b.metadata.all()||b.metadata.set("impressionsFired",{}),b.metadata.get("impressionsFired")[a]={}}return d.prototype.onToolPage=function(){var a=(b.metadata.get("baseDomain"),b.metadata.get("url"));return!!this.paths.filter(function(b){return-1!==a.indexOf(b)}).length},d.prototype.generateKey=function(a,b){return"CC"===b?a.attr("data-cid")+" "+(a.attr("data-instance-id")||"unknown")+" "+(a.attr("data-link-type")||"unknown"):"OfferClient"===b?a.attr("data-vertical")+" "+a.attr("data-cid")+" "+(a.attr("data-instance-id")||"unknown")+" "+(a.attr("data-link-type")||"unknown"):"AB"===b?a.attr("data-ab-test-id")+" "+a.attr("data-ab-variant-id")+" "+(a.attr("data-ab-ramp")||"unknown"):a.attr("href")},d.prototype.stashImpression=function(a,c){"impressionsFired"in b.metadata.all()||b.metadata.set("impressionsFired",{});var d=b.metadata.get("impressionsFired");this.vertical in d||(d[this.vertical]={});var e=d[this.vertical];e[c]=a},d.prototype.onPageView=function(){this.onToolPage()||(this.firedImpressions=[],b.metadata.get("impressionsFired")[this.vertical]={},window.setTimeout(b.polyfills.bind(this.report,this),100))},d.prototype.getImpressionHeader=function(a,c){var d={impressionId:b.utils.generateUUID(),productId:c.attr("data-cid"),productSlug:c.attr("data-cname"),productLocation:c.attr("data-clocation")||"body",vertical:c.attr("data-vertical"),category:c.attr("data-ctype"),linkType:c.attr("data-link-type")||"unknown",productInstance:c.attr("data-instance-id")||"unknown",productPosition:a,offerVersionId:c.attr("data-offer-version-id")},e=b.metadata.get(this.metadataKey),f=this.getBrainHeader(c);return f&&(d.brainHeader=f),this.onToolPage()&&e&&e.filters&&(d.pageNumber=e.filters.page),d},d.prototype.getBrainHeader=function(a){return a.attr("data-brain-success")?{brainOfferId:a.attr("data-brain-offer-id")||null,brainCategoryRank:a.attr("data-brain-category-rank")||null,brainProductRank:a.attr("data-brain-product-rank")||null,brainPosition:a.attr("data-brain-position")||null,brainSuccess:a.attr("data-brain-success")}:null},d.prototype.report=function(){var a=c(this.selector);if(0!==a.length){var d=this;a.each(function(){var a=c(this),e=d.generateKey(a,d.vertical),f=-1!==c.inArray(e,d.firedImpressions);!f&&b.utils.isElementInViewport(a)&&d.fireImpression.call(d,a)})}},d.prototype.listen=function(){console.warn("ImpressionReporters must provide a listen method.")},d}),function(a){window.NWA.CCClickReporter=a(this,window.NWA,window.$)}(function(a,b,c){function d(){b.BaseClickReporter.call(this,"CC",'[data-track-click][data-ctype="Credit Card"]',new b.CCImpressionReporter)}return d.prototype=new b.BaseClickReporter,d.prototype.constructor=d,d}),function(a){window.NWA.CCImpressionReporter=a(this,window.NWA,window.$)}(function(a,b,c){function d(){b.BaseImpressionReporter.call(this,"CC",'[data-track-impression][data-ctype="Credit Card"]'),this.metadataKey="creditCardsState",this.paths=["/balance-transfer-credit-cards","/business-credit-cards","/cash-back-credit-cards","/low-interest-credit-cards","/rewards-credit-cards","/student-credit-cards","/travel-miles-credit-cards","/zero-percent-credit-cards","/prequalify/credit-cards"]}return d.prototype=new b.BaseImpressionReporter,d.prototype.constructor=d,d.prototype.collectFilters=function(){var a=b.metadata.get(this.metadataKey),c=a?a.filters:null,d=b.utils.keysWithTrueValues;return c?{cardNetworkFilter:d(c.card_network).join(","),creditScoreFilter:(c.credit_score||{}).value,feesFilter:d(c.fees).join(","),financialInstitutionsFilter:d(c.financial_institution).join(","),monthlySpendFilter:(c.monthly_spend||{}).total,yearsWithCardFilter:(c.time_with_card||{}).value}:{}},d.prototype.constructImpression=function(a){var b=this,d=c(this.selector).index(a)+1,e=b.collectFilters(),f=a.attr("data-cid"),g=(this.generateKey(a,this.vertical),this.getCardDataFromJs(f));return g.impressionHeader=this.getImpressionHeader(d,a),g=c.extend(g,e),g.categoryRank=a.attr("data-category-rank"),g.creditCardRank=a.attr("data-credit-card-rank"),g},d.prototype.fireImpression=function(a){var c=this.constructImpression(a),d=this.generateKey(a,this.vertical);this.stashImpression(c,d,self.vertical),this.firedImpressions.push(d),b.eventCenter.publish("creditCardImpression",c)},d.prototype.getCardDataFromJs=function(a){var d,e=b.metadata.get(this.metadataKey),f=e?e.cards:null,g={};return f&&this.onToolPage()&&(c.each(f.cards,function(b,c){d=c.id.toString()===a?c:d}),g.annualFee=d.annual_fee.value.toString(),g.issuer=d.issuer,g.balanceTransferFee=d.apr.balance_transfer.fee.toString()),g},d.prototype.listen=function(){(this.onToolPage()||0!==c(this.selector).length)&&(c(window).on("resize scroll",b.polyfills.bind(this.report,this)),b.eventCenter.subscribe("pageView",b.polyfills.bind(this.onPageView,this)),b.eventCenter.subscribe("creditCardsState_set",b.polyfills.bind(this.onCreditCardsSet,this)),b.eventCenter.subscribe("reportCCImpression",b.polyfills.bind(this.report,this)))},d.prototype.onCreditCardsSet=function(){this.firedImpressions=[],b.metadata.get("impressionsFired")[this.vertical]={},window.setTimeout(b.polyfills.bind(this.report,this),100)},d}),function(a){window.NWA.ExperimentExposureReporter=a(this,window.NWA,window.$)}(function(a,b,c){function d(){b.BaseImpressionReporter.call(this,"AB","[data-ab-test]"),this.metadataKey="experimentState"}return d.prototype=new b.BaseImpressionReporter,d.prototype.constructor=d,d.prototype.constructImpression=function(a){var b={};return b.uuid=a.attr("data-ab-uuid"),b.test_id=a.attr("data-ab-test-id"),b.variant_id=a.attr("data-ab-variant-id"),b.ramp=a.attr("data-ab-ramp"),b},d.prototype.fireImpression=function(a){var c=this.constructImpression(a),d=this.generateKey(a,this.vertical);this.firedImpressions.push(d),b.eventCenter.publish("experimentExposure",c)},d.prototype.listen=function(){(this.onToolPage()||0!==c(this.selector).length)&&(c(window).on("resize scroll",b.polyfills.bind(this.report,this)),b.eventCenter.subscribe("pageView",b.polyfills.bind(this.onPageView,this)),b.eventCenter.subscribe("experimentState_set",b.polyfills.bind(this.onExperimentSet,this)),b.eventCenter.subscribe("reportExperimentExposure",b.polyfills.bind(this.report,this)))},d.prototype.onExperimentSet=function(){this.firedImpressions=[],b.metadata.get("impressionsFired")[this.vertical]={},window.setTimeout(b.polyfills.bind(this.report,this),100)},d}),function(a){window.NWA.OfferClientClickReporter=a(this,window.NWA,window.$)}(function(a,b,c){function d(){b.BaseClickReporter.call(this,"OfferClient",'[data-track-click][data-ctype="Offer"][data-cid][data-vertical]',new b.OfferClientImpressionReporter)}return d.prototype=new b.BaseClickReporter,d.prototype.constructor=d,d}),function(a){window.NWA.OfferClientImpressionReporter=a(this,window.NWA,window.$)}(function(a,b,c){function d(){b.BaseImpressionReporter.call(this,"OfferClient",'[data-track-impression][data-ctype="Offer"][data-cid][data-vertical]'),this.metadataKey="offerClientState",this.paths=["/small-business-loans","/personal-loans","/investing/online-brokerage","/investing/brokerages","/insurance/auto-policies/rates","/l/investing/best-online-brokers"],this.validVerticals=["SMB","Personal Loans","Brokers","Insurance"].map(function(a){return a.toUpperCase()})}return d.prototype=new b.BaseImpressionReporter,d.prototype.constructor=d,d.prototype.collectFilters=function(){var a=b.metadata.get(this.metadataKey)||{};return _.omit(a,["offers"])},d.prototype.constructImpression=function(a){var b=c(this.selector).index(a)+1,d=this.collectFilters(),e=a.attr("data-cid"),f=this.generateKey(a,this.vertical),g=this.getCardDataFromJs(f)||this.getCardDataFromJs(e),h={impressionHeader:this.getImpressionHeader(b,a)};return c.extend({},g,h,d)},d.prototype.fireImpression=function(a){var c=this.constructImpression(a),d=this.generateKey(a,this.vertical);this.firedImpressions.push(d),this.stashImpression(c,d,self.vertical),b.eventCenter.publish("offerClientImpression",c)},d.prototype.getCardDataFromJs=function(a){if(this.onToolPage()){var c=b.metadata.get(this.metadataKey),d=c?c.offers:null;if(d&&a in d)return d[a]}},d.prototype.listen=function(){this.onToolPage()&&(c(window).on("resize scroll",b.polyfills.bind(this.report,this)),b.eventCenter.subscribe("pageView",b.polyfills.bind(this.onPageView,this)),b.eventCenter.subscribe("offerClientState_set",b.polyfills.bind(this.onClientStateSet,this)))},d.prototype.onClientStateSet=function(){this.firedImpressions=[],b.metadata.get("impressionsFired")[this.vertical]={},window.setTimeout(b.polyfills.bind(this.report,this),100)},d}),function(a){window.NWA.URLBasedClickReporter=a(this,window.NWA,window.$)}(function(a,b,c){function d(){var a=b.metadata.get("genericURLSelector");b.BaseClickReporter.call(this,"URLBased",a,new b.URLBasedImpressionReporter)}return d.prototype=new b.BaseClickReporter,d.prototype.constructor=d,d}),function(a){window.NWA.URLBasedImpressionReporter=a(this,window.NWA,window.$)}(function(a,b,c){function d(){b.BaseImpressionReporter.call(this,"URLBased",'[data-track-impression][data-ctype="Null"]'),this.firedImpressions=[]}return d.prototype=new b.BaseImpressionReporter,d.prototype.constructor=d,d.prototype.constructImpression=function(a){var d=b.metadata.get("genericURLSelector");return{impressionHeader:{productPosition:c(d).index(a)+1}}},d.prototype.listen=function(){},d}),function(a){a(this,window.NWA,window.NWA2)()}(function(a,b,c){function d(){for(var a=[b.CCImpressionReporter,b.CCClickReporter,b.ExperimentExposureReporter,b.OfferClientImpressionReporter,b.OfferClientClickReporter,b.URLBasedImpressionReporter,b.URLBasedClickReporter],c=0,d=a.length;d>c;c++){var e=a[c],f=new e;f.listen()}}function e(a,c,d){a.setGlobalProp(c,d),b.metadata.set(c,d)}var f=function(){var a=new c;a.enableLogger("dwh"),a.enableLogger("counter"),a.enableLogger("ga"),a.enableLogger("amplitude",{key:"8e8ea4af2166f72090499f0bd330e162"}),e=e.bind(null,a),b.metadata.set("baseDomain",a.getGlobalProp("baseDomain")),b.metadata.set("url",a.getGlobalProp("url")),b.metadata._setURLBasedImpressionPaths();var f=document.querySelector('meta[name="ga-user-authentication-state"]');f&&(a.setUserProp("gaUserAuthenticationState",f.content),b.metadata.set("gaUserAuthenticationState",f.content));var g=document.querySelector("meta[name=bcc-id]");g&&e("bccId",g.content),"undefined"!=typeof nwPageTaxonomy&&(e("taxonomyVertical",nwPageTaxonomy.vertical),e("taxonomyTopic",nwPageTaxonomy.topic),e("taxonomyPageType",nwPageTaxonomy.pageType)),b.eventCenter.subscribe("variantIds_set",function(b){a.setSeenExperimentIds(b)}),"undefined"!=typeof nwVariantIds&&e("variantIds",nwVariantIds),"undefined"!=typeof nwWPData&&(e("wpPageID",nwWPData.wpPageID),e("wpPageType",nwWPData.wpPageType)),b.eventCenter.subscribe("creditCardImpression",a.track.bind(a,c.Events.CC_IMPRESSION)),b.eventCenter.subscribe("offerClientImpression",a.track.bind(a,c.Events.IMPRESSION)),b.eventCenter.subscribe("formInputChanged",a.track.bind(a,c.Events.FORM_INPUT_CHANGED)),b.eventCenter.subscribe("experimentExposure",a.track.bind(a,c.Events.EXPERIMENT_EXPOSURE)),b.eventCenter.subscribe("customEvent",function(b){var c=b.info;c.endpoint=b.endpoint,a.track(b.eventName,c)}),b.eventCenter.subscribe("gaUserAuthenticationState_set",function(b){a.setUserProp("gaUserAuthenticationState",b)}),a.track(c.Events.PAGE_VIEW,{},function(){b.metadata.set("initialPageViewSent",!0),b.metadata.set("userId",a.getUserProp("cookieId")),b.metadata.set("browserSessionId",a.getUserProp("browserSessionId")),b.metadata.set("pageViewId",a.getGlobalProp("pageViewId")),b.metadata.set("url",a.getGlobalProp("url")),NW.analytics.uid=a.getUserProp("cookieId"),b.eventCenter.publish("pageView"),b.eventCenter.subscribe("pageView",a.track.bind(a,c.Events.PAGE_VIEW)),a.startHeartbeats()}),d(),window.nwa=a};return f});